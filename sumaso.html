
<!DOCTYPE html>
<html>
<head>
	<title>SuMaSo - Sustainable Maker Sources</title>
	<!--
	GIT					: https://github.com/digmac-org/MakersFreeMarketKA
	Changelog 	: Changelog.txt
	Open Issues : NextSteps.txt
	Contributors:	Contributors.txt
	Credits			: Credits.txt
	-->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<!--Favicon-->
	<!-- DEV
	-->
	<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
	<link rel="manifest" href="site.webmanifest">
	<link rel="mask-icon" href="safari-pinned-tab.svg" color="#00bb31">
	<meta name="msapplication-TileColor" content="#00bb31">
	<meta name="theme-color" content="#00bb31">
	<!-- PROD
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#00bb31">
	<meta name="msapplication-TileColor" content="#00bb31">
	<meta name="theme-color" content="#00bb31">
	-->

	<!--Sidebar-->
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" href="css/leaflet-sidebar.css" />

	<!--Leaflet-->
	<script src="http://cdn.leafletjs.com/leaflet/v1.6.0/leaflet.js"></script>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v1.6.0/leaflet.css" />


	<style>
		html, body {
			height: 100%;
			padding: 0;
			margin: 0;
			background-color: #C0C0C0;
		}
		#map {
			width: 100%;
			height: 100%;
		}

		/*Sidebar*/
		html, body, #map {
				font: 10pt "Helvetica Neue", Arial, Helvetica, sans-serif;
		}

		.details {
				font-style: italic;
				color: #AAA;
		}

		/*Watermark Logo*/
		img.leaflet-control {
  		opacity: 0.3;
  		filter: alpha(opacity=30); /* For IE8 and earlier */
		}

		img.leaflet-control:hover {
  		opacity: 1.0;
  		filter: alpha(opacity=100); /* For IE8 and earlier */
		}
		/*Icon Legende - Sidebar Details*/
		img.icondescription{
			float: left;
		}
	</style>

</head>
<body>

<!--                                                                            SIDEBAR DEF - START.......................................................... -->
<div id="sidebar" class="sidebar collapsed">
			<!-- Nav tabs -->
			<div class="sidebar-tabs">
					<ul role="tablist">
							<li><a href="#home" role="tab"><i class="fa fa-bars"></i></a></li>
							<li class="disabled"><a href="#info" role="tab"><i class="fa fa-info-circle"></i></a></li>
							<li class="disabled"><a href="#legend" role="tab"><i class="fa fa-picture-o"></i></a></li>
							<!--
							---NOPE---<li class="disabled"><a href="#legend" role="tab"><i class="fa fa-map"></i></a></li>
												<li class="disabled"><a href="#legend" role="tab"><i class="fa fa-hand-spock-o "></i></a></li>
												<li class="disabled"><a href="#support" role="tab"><i class="fa fa-sticky-note"></i></a></li>
											-->
							<li class="disabled"><a href="#support" role="tab"><i class="fa fa-life-ring"></i></a></li>
							<li class="disabled"><a href="#support" role="tab"><i class="fa fa-users"></i></a></li>
							<li class="disabled"><a href="#support" role="tab"><i class="fa fa-map-marker"></i></a></li>


							<li><a href="#karlsruhe" role="tab"><i class="fa fa-eye"></i></a></li>
							<li><a href="#karlsruhe" role="tab"><i class="fa fa-exclamation-triangle"></i></a></li>
							<li><a href="#karlsruhe" role="tab"><i class="fa fa-search-plus"></i></a></li>


							<li class="disabled"><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li>
							<li><a href="#contributors" role="tab"><i class="fa fa-user"></i></a></li>
							<li class="disabled"><a href="#profile" role="tab"><i class="fa fa-hand-o-up"></i></a></li>
							<li class="disabled"><a href="#suno" role="tab"><i class="fa fa-sun-o"></i></a></li>
							<li class="disabled"><a href="#messages" role="tab"><i class="fa fa-envelope"></i></a></li>

					</ul>
					<ul role="tablist">
							<li class="disabled"><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li>
							<li><a href="https://github.com/digmac-org/MakersFreeMarketKA" role="tab" target="_blank"><i class="fa fa-github"></i></a></li>
					</ul>
			</div>

			<!-- Tab panes -->
			<div class="sidebar-content">


					<div class="sidebar-pane" id="home">
							<h1 class="sidebar-header">
									SuMaSo:
									<span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
							</h1>

							<h3>SuMaSo was ?</h3>
							<p class="details">
								SuMaSo steht für <strong>Su</strong>stainable <strong>Ma</strong>ker <strong>So</strong>urces und somit (frei übersetzt) für nachhaltige Bezugsquellen für Bastelbegeisterte.<br>
							</p>

							<h3>Still confused ?!?</h3>
							<p class="details">
								Das Projekt wurde Anfang 2020 aufgesetzt und sollte erstmals alle kostenlosen Bezugsquellen z.B. für Bastelholz - aus der Region Karlsruhe - auf einer Karte sichtbar machen. Im Laufe der Realisierung wurden dann weitere interessante Dinge implementiert (Maker Werkstätten, Hacker Spaces ...) Viele dieser Dinge sind auch für andere Regionen ersichtlich - wenn auch nicht so gut und manuell geprüft, wie die Einträge rund um Karlsruhe.
							</p>

							<h3>Finden !</h3>
							<p class="details">
								Um Quellen zu finden bzw. die Orte der Quellen anzuzeigen - gibt es mehrere Möglichkeiten. Übersichtsseite (wie suchen) Detail-Infos auf der Karte anzegein lassen, Informationen filtern, Spezielle Termine farblich anzeigen.
							</p>

							<h3>Besonderheiten / Details für Karlsruhe:</h3>
							<p class="details">
								Durch den initialen Fokus auf Karlsruhe gibt es für die Stadt erweiterte Funktionen. Diese sind:
							</p>

							<h3>Aber da fehlt ja...</h3>
							<p class="details">
								Dir fehlen Informationen auf der Karte? - Bitte nim Kontakt zu uns auf bzw. trage die fehlende Information direkt selbst ein.
							</p>
							<h3>Mitmachen:</h3>
							<p class="details">
								Dies ist ein Open Source / Open Knowledge Projekt - im Geiste dieses Gedankens kannst du theoretisch einen kompletten Klon dieser Seite erstellen - oder... (und das wäre zielführender...) Du kannst in unserem Team die Weiterentwicklung der Funktionalitäten voran treiben und teil etwas größeren sein...
							</p>
					</div>

					<div class="sidebar-pane" id="karlsruhe">
						<h1 class="sidebar-header">
								Karlsruhe:
								<span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
						</h1>
						<h3>Karlsruhe:</h3>
						<p class="details">
							Die Karte wurde initial und mit Fokus auf die Stadt Karlsruhe entwickelt. Die hier aufgeführten Funktionen sind Karlsruhe spezifisch und führen nur in dieser Region zu Ergebnissen.<br>
						</p>
						<strong>Bitte beachten!</strong> Diese Karten sind eine Sammlung von externen Daten. Die Daten und Termine wurden maschinell gesammelt und ohne größere Prüfungen hier eingefügt. Bitte kontrolliere die Angaben auf der jeweilige Datenquelle manuell, bevor du zu einem Termin aufbrichst.

						<h4>[KA] - HackerSpaces - nach Ort:</h4>
							<p class="details">
								<img class='icondescription' src='img/hackerspace_37x37.png'>
								Hackerspaces und offene Werkstätten in Karlsruhe:<br>
								Anzeige der Orte erfolgt nun direkt über die Layer Selection und die dortige Checkbox (KA Prefix).Die Orte werden dann mit diesem Icon angezeigt. Die nächsten Termin einer Veranstaltung findest du dann in den Popup Details des jeweiligen Ortes. Bitte achte auf zusätzliche Informationen und Ergänzungen der angegebenen Quelle (Woher kommt der Termin - gibt es eine Aktualisierung?)
							</p>
						<h4>[KA] - Flohmärkte - nach Ort:</h4>
							<p class="details">
								<img class='icondescription' src='img/flohmarkt_grau_37x37.png'>
								Flohmärkte (Orte) in der Karlsruher Region:<br>
								Anzeige der Orte erfolgt nun direkt über die Layer Selection und die dortige Checkbox (KA Prefix). Die Orte werden dann mit diesem Icon angezeigt.
								Es gibt auch eine Anzeige für Flohmärkte, die Datumsangaben beinhaltet.
								Bitte achte auf zusätzliche Informationen und Ergänzungen der angegebenen Quelle (Woher kommt der Termin - gibt es eine Aktualisierung?)
								Zeige die Orte an denen Flohmärkte stattfinden. Den nächsten Termin einer Veranstaltung findest du dann in den Popup Details des jeweiligen Ortes. Bitte achte auf zusätzliche Informationen und Ergänzungen der angegebenen Quelle (Woher kommt der Termin - gibt es eine Aktualisierung?)
							</p>

						<h4>[KA] - Flohmärkte - nach Datum:</h4>
							<p class="details">
								<img class='icondescription' src='img/flohmarkt_37x37.png'>
								<select name="dates" id="dateselectfloh">
									<option value="wrongselection" selected>Bitte auswählen...</option>
									<option value='01-07'>07.01.2020</option>
									<option value='01-09'>09.01.2020</option>
								</select>
								<span id="fakeshowflohdates"></span>
								Daten (Termine) an denen Flohmärkte stattfinden. Selektiere ein Datum zu dem ein Flohmarkttermin hinterlegt ist - dann wird dir der entsprechende Ort in der Karte angezeigt. Weitere Details findest du in den Popup Texten.
							</p>

						<h4>[KA] - Sperrmüll - nach Datum:</h4>
							<p class="details">
								Wähle ein Datum, um die Straßen mit Sperrmüllabholung anzuzeigen.<br>
								Termine sind alle von 2020 / im Format dd.mm.jjjj<br>
									<select name="dates" id="dateselectsperr">
										<option value="wrongselection" selected>Bitte auswählen...</option>
										<option value='01-07'>07.01.2020</option>
										<option value='01-09'>09.01.2020</option>
										<option value='01-13'>13.01.2020</option>
										<option value='01-15'>15.01.2020</option>
										<option value='01-17'>17.01.2020</option>
										<option value='01-21'>21.01.2020</option>
										<option value='01-23'>23.01.2020</option>
										<option value='01-27'>27.01.2020</option>
										<option value='01-29'>29.01.2020</option>
										<option value='01-31'>31.01.2020</option>
										<option value='02-04'>04.02.2020</option>
										<option value='02-06'>06.02.2020</option>
										<option value='02-10'>10.02.2020</option>
										<option value='02-12'>12.02.2020</option>
										<option value='02-14'>14.02.2020</option>
										<option value='02-18'>18.02.2020</option>
										<option value='02-20'>20.02.2020</option>
										<option value='02-26'>26.02.2020</option>
										<option value='02-28'>28.02.2020</option>
										<option value='03-03'>03.03.2020</option>
										<option value='03-05'>05.03.2020</option>
										<option value='03-09'>09.03.2020</option>
										<option value='03-11'>11.03.2020</option>
										<option value='03-13'>13.03.2020</option>
										<option value='03-17'>17.03.2020</option>
										<option value='03-19'>19.03.2020</option>
										<option value='03-23'>23.03.2020</option>
										<option value='03-25'>25.03.2020</option>
										<option value='03-27'>27.03.2020</option>
										<option value='03-31'>31.03.2020</option>
										<option value='04-02'>02.04.2020</option>
										<option value='04-06'>06.04.2020</option>
										<option value='04-08'>08.04.2020</option>
										<option value='04-15'>15.04.2020</option>
										<option value='04-17'>17.04.2020</option>
										<option value='04-21'>21.04.2020</option>
										<option value='04-23'>23.04.2020</option>
										<option value='04-27'>27.04.2020</option>
										<option value='04-29'>29.04.2020</option>
										<option value='05-04'>04.05.2020</option>
										<option value='05-06'>06.05.2020</option>
										<option value='05-08'>08.05.2020</option>
										<option value='05-12'>12.05.2020</option>
										<option value='05-14'>14.05.2020</option>
										<option value='05-19'>19.05.2020</option>
										<option value='05-25'>25.05.2020</option>
										<option value='05-27'>27.05.2020</option>
										<option value='05-29'>29.05.2020</option>
										<option value='06-02'>02.06.2020</option>
										<option value='06-03'>03.06.2020</option>
										<option value='06-04'>04.06.2020</option>
										<option value='06-05'>05.06.2020</option>
										<option value='06-08'>08.06.2020</option>
										<option value='06-09'>09.06.2020</option>
										<option value='06-15'>15.06.2020</option>
										<option value='06-17'>17.06.2020</option>
										<option value='06-19'>19.06.2020</option>
										<option value='06-23'>23.06.2020</option>
										<option value='06-25'>25.06.2020</option>
										<option value='06-29'>29.06.2020</option>
										<option value='07-01'>01.07.2020</option>
										<option value='07-03'>03.07.2020</option>
										<option value='07-07'>07.07.2020</option>
										<option value='07-09'>09.07.2020</option>
										<option value='07-13'>13.07.2020</option>
										<option value='07-15'>15.07.2020</option>
										<option value='07-17'>17.07.2020</option>
										<option value='07-21'>21.07.2020</option>
										<option value='07-23'>23.07.2020</option>
										<option value='07-27'>27.07.2020</option>
										<option value='07-29'>29.07.2020</option>
										<option value='07-31'>31.07.2020</option>
										<option value='08-04'>04.08.2020</option>
										<option value='08-06'>06.08.2020</option>
										<option value='08-10'>10.08.2020</option>
										<option value='08-12'>12.08.2020</option>
										<option value='08-14'>14.08.2020</option>
										<option value='08-18'>18.08.2020</option>
										<option value='08-20'>20.08.2020</option>
										<option value='08-24'>24.08.2020</option>
										<option value='08-26'>26.08.2020</option>
										<option value='08-28'>28.08.2020</option>
										<option value='09-01'>01.09.2020</option>
										<option value='09-03'>03.09.2020</option>
										<option value='09-07'>07.09.2020</option>
										<option value='09-09'>09.09.2020</option>
										<option value='09-11'>11.09.2020</option>
										<option value='09-15'>15.09.2020</option>
										<option value='09-17'>17.09.2020</option>
										<option value='09-21'>21.09.2020</option>
										<option value='09-23'>23.09.2020</option>
										<option value='09-28'>28.09.2020</option>
										<option value='09-30'>30.09.2020</option>
										<option value='10-02'>02.10.2020</option>
										<option value='10-06'>06.10.2020</option>
										<option value='10-12'>12.10.2020</option>
										<option value='10-14'>14.10.2020</option>
										<option value='10-16'>16.10.2020</option>
										<option value='10-20'>20.10.2020</option>
										<option value='10-22'>22.10.2020</option>
										<option value='10-26'>26.10.2020</option>
										<option value='10-28'>28.10.2020</option>
										<option value='10-30'>30.10.2020</option>
										<option value='11-03'>03.11.2020</option>
										<option value='11-05'>05.11.2020</option>
										<option value='11-09'>09.11.2020</option>
										<option value='11-11'>11.11.2020</option>
										<option value='11-13'>13.11.2020</option>
										<option value='11-17'>17.11.2020</option>
										<option value='11-19'>19.11.2020</option>
										<option value='11-23'>23.11.2020</option>
										<option value='11-25'>25.11.2020</option>
										<option value='11-27'>27.11.2020</option>
										<option value='12-01'>01.12.2020</option>
										<option value='12-03'>03.12.2020</option>
										<option value='12-07'>07.12.2020</option>
										<option value='12-09'>09.12.2020</option>
										<option value='12-11'>11.12.2020</option>
									</select>
									<br>
									<span id="fakeshowsperrdates"></span>

									<h4>[KA] - Wertstoffhöfe - nach Ort:</h4>
									<p class="details">
										<img class='icondescription' src='img/recycling_37x37.png'>
										Wertstoffstationen / Wertstoffhöfe in und um Karlsruhe:<br>
										<input type="checkbox" name="checkbox" id="kahackerspaces">
										Zeige die Orte. Die Öffnungszeiten findest du dann in den Popup Details des jeweiligen Ortes. Bitte achte auf zusätzliche Informationen und Ergänzungen der angegebenen Quelle (Woher kommt der Termin - gibt es eine Aktualisierung?)
									</p>
					</div>

					<div class="sidebar-pane" id="contributors">
							<h1 class="sidebar-header">Contributors:<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
							<h3>Contributors:</h3>
							<p class="details">
							Folgende Personen haben an diesem Projekt mitgewirkt:<br>
							<ul>
								<li>DigMac</li><li>Codetoffel</li><li>GrandmastaP</li>
							</ul>
							</p>
					</div>

					<div class="sidebar-pane" id="messages">
							<h1 class="sidebar-header">Messages<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
					</div>

					<div class="sidebar-pane" id="settings">
							<h1 class="sidebar-header">Settings<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
					</div>
			</div>
	</div>
<!--                                                                            SIDEBAR DEF - STOP.......................................................... -->

	<div id='map' class="sidebar-map"></div>
  <script src="js/leaflet-sidebar.js"></script>

	<script>
	//_____________________FORM_RELATED___________________________________________START - FORM SELECT StreetSperrmuell!
	//Event listener - change of the select (dropdown)

	let selsperr = document.getElementById('dateselectsperr');
	selsperr.addEventListener ("change", function () {
		let fakeshowsperrdates = document.getElementById('fakeshowsperrdates');
		fakeshowsperrdates.innerHTML = "TODO: Straßen hervorheben statt txt. <a href='https://boegi.com/mymaps/fakedata/"+this.value+".txt'>TXT File Workaround for "+this.value+"</a>) dran: <br>";

		let showselecteddatespansperr = document.getElementById('showselecteddate');
		showselecteddatespansperr.innerHTML = " [Sperrmüll Straßen am 2020 ->"+this.value+"]";

		//Test - open Alert from JSvar
		sperrmuellIcon = L.icon({
			iconUrl: 'img/sperrmuell-ema_37x37.png',
			iconSize: [37, 37],
			iconAnchor: [18, 37],
			popupAnchor: [0, -28]
		});
		//folder = C:\2020Pro\MakersFreeMarketKA\ka\2020\flohmarkt\test.js
		sperrmuellIcon = L.icon({
			iconUrl: 'img/sperrmuell-ema_37x37.png',
			iconSize: [37, 37],
			iconAnchor: [18, 37],
			popupAnchor: [0, -28]
		});
		loadScript("ka/2020/sperrmuell/"+this.value+".js", myPrettyCode);

	});

	let selfloh = document.getElementById('dateselectfloh');
	selfloh.addEventListener ("change", function () {
		let fakeshowflohdates = document.getElementById('fakeshowflohdates');
		fakeshowflohdates.innerHTML = "TODO: Flohmarkt Orte hervorheben statt txt. <a href='https://boegi.com/mymaps/fakedata/"+this.value+".txt'>TXT File Workaround for "+this.value+"</a>) dran: <br>";

		let showselecteddatespanfloh = document.getElementById('showselecteddate');
		showselecteddatespanfloh.innerHTML = " [Flohmarkt Orte am 2020 "+this.value+"]";

		//Test - open Alert from JSvar
		sperrmuellIcon = L.icon({
			iconUrl: 'img/sperrmuell-ema_37x37.png',
			iconSize: [37, 37],
			iconAnchor: [18, 37],
			popupAnchor: [0, -28]
		});
		//folder = C:\2020Pro\MakersFreeMarketKA\ka\2020\flohmarkt\test.js
		loadScript("ka/2020/flohmarkt/test.js", myPrettyCode);
		//alert("This is a END popup...");//Überholt! das im loadScript definierte!
	});

	function sperrmuellpopupbeta(){
		var spt="";

		for (i = 0; i < streetparts.length; i++) {
  		spt += " - " + streetparts[i] + "\n";
		}

		alert("(BETA) Diese Funktion ist im !BETA Status! und noch nicht ausreichend getestet! [Strassen] : "+spt);
	}

	var myPrettyCode = function() {
	   // Here, do whatever you want
		 //var additionalText = "asdasdasdasd asdas aAdditional Text";
		 //alert("Das nächste ist aus einer Var die ich im anderen File hatte");
		 //alert("(BETA) diese Funktion ist noch nicht ausreichend getestet!\nErgebnisse bitte mit dieser Information im Hinterkopf verwenden\n"+popupinfo);
		 sperrmuellpopupbeta();
		 var flohtestlayergroup = L.layerGroup();
		 L.geoJSON(streetpartsgeojson, {
			 filter: function (feature, layer) {
				 if (feature.properties) {
					 return feature.properties.underConstruction !== undefined ? !feature.properties.underConstruction : true;
				 }
				 return false;
			 },
			 pointToLayer: function (feature, latlng) {
				 return L.marker(latlng, {icon: sperrmuellIcon});
			 },
			 onEachFeature: onEachFeatureSperrmuell
		 }).addTo(map);

	};
	function loadScript(url, callback)
	{
	    // Adding the script tag to the head as suggested before
	    var head = document.head;
	    var script = document.createElement('script');
	    script.type = 'text/javascript';
	    script.src = url;

	    // Then bind the event to the callback function.
	    // There are several events for cross browser compatibility.
	    script.onreadystatechange = callback;
	    script.onload = callback;

	    // Fire the loading
	    head.appendChild(script);
	}


	var sidebar = L.control.sidebar('sidebar').addTo(map);

	//Wertstoffhoflayergroup
	var recyclingIcon = L.icon({
		iconUrl: 'img/recycling_37x37.png',
		iconSize: [37, 37],
		iconAnchor: [18, 37],
		popupAnchor: [0, -28]
	});

	//Manually created - next step - check and mayce automate the points - Reformat the data?!
	var wertstoffstationen = {
		    "type": "FeatureCollection",
		    "features": [
		        {
							"type": "Feature",
							"properties": {
									"popupContent": "Wertstoffstation - Durlach, Maybachstr. 10 b",
									"additionalinfo":"Bitte unbedingt die original Website besuchen - hier nur Orientierungswerte!",
									"link":"https://www.karlsruhe.de/b4/buergerdienste/abfall/einrichtungen/wertstoffstationen.de",
									"adr":"Maybachstr. 10 b",
									"openinghours": "<strong>OpeningHours:</strong><br>"+
																	"Montag geschlos­sen<br>"+
																	"Dienstag bis Freitag 09:00 bis 17:00 Uhr<br>"+
																	"Samstag 08:30 bis 17:00 Uhr<br>"+
																	"<strong>* Bitte ÖZ mit offizieller Website vergleichen!</strong><br>",
									"underConstruction": false
							},
							"geometry": {
									"type": "Point",
									"coordinates": [8.44408,48.99802]
							},
		            "id": 1
		        },
						{
							"type": "Feature",
							"properties": {
									"popupContent": "Wertstoffstation - Durlach, Alte Weingartener Straße 63",
									"additionalinfo":"Bitte unbedingt die original Website besuchen - hier nur Orientierungswerte!",
									"link":"https://www.karlsruhe.de/b4/buergerdienste/abfall/einrichtungen/wertstoffstationen.de",
									"adr":"Alte Weingar­te­ner Str. 63",
									"openinghours": "<strong>OpeningHours:</strong><br>"+
																	"Montag, Mittwoch und Freitag geschlos­sen<br>"+
																	"Dienstag, Donnerstag 09:00 bis 17:00 Uhr<br>"+
																	"Samstag 10:00 bis 16:00 Uhr<br>"+
																	"<strong>* Bitte ÖZ mit offizieller Website vergleichen!</strong><br>",
									"underConstruction": false
							},
							"geometry": {
									"type": "Point",
									"coordinates": [8.4847559,49.0116673]
							},
								"id": 2
						},
						{
							"type": "Feature",
							"properties": {
									"popupContent": "Wertstoffstation - Daxlanden, Fettweisstraße",
									"additionalinfo":"Bitte unbedingt die original Website besuchen - hier nur Orientierungswerte!",
									"link":"https://www.karlsruhe.de/b4/buergerdienste/abfall/einrichtungen/wertstoffstationen.de",
									"adr":"Fettweisstraße 12",
									"openinghours": "<strong>OpeningHours:</strong><br>"+
																	"Montag, Mittwoch und Freitag geschlos­sen<br>"+
																	"Dienstag, Donnerstag 09:00 bis 17:00 Uhr<br>"+
																	"Samstag 10:00 bis 16:00 Uhr<br>"+
																	"<strong>* Bitte ÖZ mit offizieller Website vergleichen!</strong><br>",
									"underConstruction": false
							},
							"geometry": {
									"type": "Point",
									"coordinates": [8.3252098,49.0082644]
							},
								"id": 3
						},
						{
							"type": "Feature",
							"properties": {
									"popupContent": "Wertstoffstation - Grünwettersbach, Wiesenstraße 34",
									"additionalinfo":"Bitte unbedingt die original Website besuchen - hier nur Orientierungswerte!",
									"link":"https://www.karlsruhe.de/b4/buergerdienste/abfall/einrichtungen/wertstoffstationen.de",
									"adr":"Wiesenstr. 34",
									"openinghours": "<strong>OpeningHours:</strong><br>"+
																	"Montag, Dienstag und Donnerstag geschlos­sen<br>"+
																	"Mittwoch, Freitag 14:30 bis 18:30 Uhr<br>"+
																	"Samstag 10:00 bis 16:00 Uhr<br>"+
																	"<strong>* Bitte ÖZ mit offizieller Website vergleichen!</strong><br>",
									"underConstruction": false
							},
							"geometry": {
									"type": "Point",
									"coordinates": [8.4713046,48.9511257]
							},
								"id": 4
						},
						{
							"type": "Feature",
							"properties": {
									"popupContent": "Wertstoffstation - Hagsfeld, Schäferstraße",
									"additionalinfo":"Bitte unbedingt die original Website besuchen - hier nur Orientierungswerte!",
									"link":"https://www.karlsruhe.de/b4/buergerdienste/abfall/einrichtungen/wertstoffstationen.de",
									"adr":"Schäferstraße 26",
									"openinghours": "<strong>OpeningHours:</strong><br>"+
																	"Montag, Dienstag und Donnerstag geschlos­sen<br>"+
																	"Mittwoch, Freitag 09:00 bis 17:00 Uhr<br>"+
																	"Samstag 10:00 bis 16:00 Uhr<br>"+
																	"<strong>* Bitte ÖZ mit offizieller Website vergleichen!</strong><br>",
									"underConstruction": false
							},
							"geometry": {
									"type": "Point",
									"coordinates": [8.4596457,49.027282]
							},
								"id": 5
						},
						{
							"type": "Feature",
							"properties": {
									"popupContent": "Wertstoffstation - Neureut, Am Junkertschritt (beim Bauhof)",
									"additionalinfo":"Bitte unbedingt die original Website besuchen - hier nur Orientierungswerte!",
									"link":"https://www.karlsruhe.de/b4/buergerdienste/abfall/einrichtungen/wertstoffstationen.de",
									"adr":"Am Junkert­schritt",
									"openinghours": "<strong>OpeningHours:</strong><br>"+
																	"Montag, Dienstag und Donnerstag geschlos­sen<br>"+
																	"Mittwoch, Samstag 10:00 bis 15:30 Uhr<br>"+
																	"Freitag 13:30 bis 15:30 Uhr<br>"+
																	"<strong>* Bitte ÖZ mit offizieller Website vergleichen!</strong><br>",
									"underConstruction": false
							},
							"geometry": {
									"type": "Point",
									"coordinates": [8.3712987,49.054668]
							},
								"id": 6
						},
						{
							"type": "Feature",
							"properties": {
									"popupContent": "Wertstoffstation - Neureut, Waldsportplatz",
									"additionalinfo":"Bitte unbedingt die original Website besuchen - hier nur Orientierungswerte!",
									"link":"https://www.karlsruhe.de/b4/buergerdienste/abfall/einrichtungen/wertstoffstationen.de",
									"adr":"Waldsportplatz",
									"openinghours": "<strong>OpeningHours:</strong><br>"+
																	"Montag, Dienstag und Donnerstag geschlos­sen<br>"+
																	"Mittwoch, Samstag 10:00 bis 15:30 Uhr<br>"+
																	"Freitag 13:30 bis 15:30 Uhr<br>"+
																	"<strong>* Bitte ÖZ mit offizieller Website vergleichen!</strong><br>",
									"underConstruction": false
							},
							"geometry": {
									"type": "Point",
									"coordinates": [8.3992358,49.0463962]
							},
								"id": 7
						},
						{
							"type": "Feature",
							"properties": {
									"popupContent": "Wertstoffstation - Oberreut, Großoberfeld",
									"additionalinfo":"Bitte unbedingt die original Website besuchen - hier nur Orientierungswerte!",
									"link":"https://www.karlsruhe.de/b4/buergerdienste/abfall/einrichtungen/wertstoffstationen.de",
									"adr":"Großo­ber­feld 3",
									"openinghours": "<strong>OpeningHours:</strong><br>"+
																	"Montag, Dienstag und Donnerstag geschlos­sen<br>"+
																	"Mittwoch, Freitag 09:00 bis 17:00 Uhr<br>"+
																	"Samstag 10:00 bis 16:00 Uhr<br>"+
																	"<strong>* Bitte ÖZ mit offizieller Website vergleichen!</strong><br>",
									"underConstruction": false
							},
							"geometry": {
									"type": "Point",
									"coordinates": [8.3713901,48.9836361]
							},
								"id": 8
						},
						{
							"type": "Feature",
							"properties": {
									"popupContent": "Wertstoffstation - Nordbe­cken­straße",
									"additionalinfo":"Bitte unbedingt die original Website besuchen - hier nur Orientierungswerte!",
									"link":"https://www.karlsruhe.de/b4/buergerdienste/abfall/einrichtungen/wertstoffstationen.de",
									"adr":"Nordbe­cken­straße 1",
									"openinghours": "<strong>OpeningHours:</strong><br>"+
																	"Montag geschlos­sen<br>"+
																	"Dienstag bis Freitag 09:00 bis 17:00 Uhr<br>"+
																	"Samstag 08:30 bis 17:00 Uhr<br>"+
																	"<strong>* Bitte ÖZ mit offizieller Website vergleichen!</strong><br>",
									"underConstruction": false
							},
							"geometry": {
									"type": "Point",
									"coordinates": [8.3386551,49.0183836]
							},
								"id": 9
						}
					]
			};

			var wertstoffhoflayergroup = L.layerGroup();
			L.geoJSON(wertstoffstationen, {
				filter: function (feature, layer) {
					if (feature.properties) {
						return feature.properties.underConstruction !== undefined ? !feature.properties.underConstruction : true;
					}
					return false;
				},
				pointToLayer: function (feature, latlng) {
					return L.marker(latlng, {icon: recyclingIcon});
				},
				onEachFeature: onEachFeature
			}).addTo(wertstoffhoflayergroup);

	/*----------------------------------------------------------------------------HACKERSPACES --- START*/
	var hackerspaceIcon = L.icon({
		iconUrl: 'img/hackerspace_37x37.png',
		iconSize: [37, 37],
		iconAnchor: [18, 37],
		popupAnchor: [0, -28]
	});

	//Manually created - Maybe recheck in the next step...
	var hackerspaces = {
	    "type": "FeatureCollection",
	    "features": [
	        {
						"type": "Feature",
						"properties": {
								"popupContent": "Entropia e.V. (Hackerspace)",
								"additionalinfo":"Ort für Hacker, Haeck­sen und Neu­gie­rige",
								"link":"https://entropia.de/Hauptseite",
								"underConstruction": false
						},
						"geometry": {
								"type": "Point",
								"coordinates": [8.40717,49.0065]
						},
	            "id": 1
	        },
					{
						"type": "Feature",
						"properties": {
								"popupContent": "FabLab Karlsruhe e.V. und Werkstatt",
								"openinghours": "<strong>OpeningHours:</strong>OpenLabDay (Jeden dritten Donnerstag im Monat) Details siehe Website.",
								"link":"https://fablab-karlsruhe.de/",

								"underConstruction": false
						},
						"geometry": {
								"type": "Point",
								"coordinates": [8.429636,49.00570]
						},
	            "id": 2
	        },
					{
						"type": "Feature",
						"properties": {
								"popupContent": "Holzwerkstatt",
								"openinghours": "<strong>OpeningHours:</strong> (see website)",
								"additionalinfo":"Die Holzwerkstatt der Waldpädagogik Karlsruhe bietet öffentliche Termine zur Werkstattnutzung. Details siehe Homepage.",
								"link":"http://www.waldpaedagogik-karlsruhe.de/home/holzwerkstatt/",
								"underConstruction": false
						},
						"geometry": {
								"type": "Point",
								"coordinates": [8.407111,49.030616]
						},
	            "id": 3
	        },
					{
						"type": "Feature",
						"properties": {
								"popupContent": "RaumZeitLabor im Pfadfinderzentrum Raumünzach",
								"additionalinfo":"Außenstelle Entropia - 4 Tage im Sommer - Pfadfinderzentrum Raumünzach",
								"openinghours": "<strong>4 Tages Event:</strong> 19. - 23. August 2020 Details (see website)",
								"link":"https://entropia.de/ZeitRaumLabor",
								"underConstruction": false
						},
						"geometry": {
								"type": "Point",
								"coordinates": [8.349867,48.639024]
						},
							"id": 4
					},
				]
		};

		var hackerspacelayergroup = L.layerGroup();
		L.geoJSON(hackerspaces, {
			filter: function (feature, layer) {
				if (feature.properties) {
					//If the property "underConstruction" exists and is true, return false (don't render features under construction)
					return feature.properties.underConstruction !== undefined ? !feature.properties.underConstruction : true;
				}
				return false;
			},
			pointToLayer: function (feature, latlng) {
				return L.marker(latlng, {icon: hackerspaceIcon});
			},
			onEachFeature: onEachFeature
		}).addTo(hackerspacelayergroup);

	//_____________________MAP_RELATED____________________________________________
	//var map = L.map('map').setView([49.00388,8.40932], 14);
	//CC Infos...


	var littleton = L.marker([39.61, -105.02]).bindPopup('This is Littleton, CO.'),
	    denver    = L.marker([39.74, -104.99]).bindPopup('This is Denver, CO.'),
	    aurora    = L.marker([39.73, -104.8]).bindPopup('This is Aurora, CO.'),
	    golden    = L.marker([39.77, -105.23]).bindPopup('This is Golden, CO.');
	var cities = L.layerGroup([littleton, denver, aurora, golden]);

	var grayscale = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>'+
			'<span id="showselecteddate"></span>',
			id: 'mapbox/light-v9'
	}),
	    streets   = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
				maxZoom: 18,
				attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>'+
				'<span id="showselecteddate"></span>',
				id: 'mapbox/light-v9'
	});

	var map = L.map('map', {
	    center: [49.00388,8.40932],
	    zoom: 14,
	    layers: [grayscale, cities, hackerspacelayergroup,wertstoffhoflayergroup]
	});

	var baseMaps = {
    "Grayscale": grayscale,
    "Streets": streets
	};

	var overlayMaps = {
		"Wertstoffhöfe": cities,
		"SecondHand": cities,
		"MakerShops": cities,
		"Hackerspaces": cities,
		"KA - Hackerspaces": hackerspacelayergroup,
		"KA - Wertstoffhöfe": wertstoffhoflayergroup,
		"KA - Flohmärkte": cities
	};

	var baseMaps = {
	    "<span style='color: gray'>Grayscale</span>": grayscale,
	    "Streets": streets
	};


	L.control.layers(baseMaps, overlayMaps).addTo(map);
	L.Control.Watermark = L.Control.extend({
		onAdd: function(map) {
			var img = L.DomUtil.create('img');
			img.src = 'img/sumaso_200x60_36c3style_semitransparent.png';
			img.style.width = '200px';
			//L.DomEvent.on()
			return img;
		},
		onRemove: function(map) {
			//L.DomEvent.off()
		}
	});
	L.control.watermark = function(opts) {
		return new L.Control.Watermark(opts);
	}
	L.control.watermark({ position: 'bottomright' }).addTo(map);


	//Function called for each feature - Define the Popup Content etc...
	function onEachFeature(feature, layer) {
		var popupContent = "";
		if (feature.properties && feature.properties.popupContent) {
			popupContent += "<strong>"+feature.properties.popupContent+"</strong><br>";
		}
		if (feature.properties && feature.properties.additionalinfo) {
			popupContent += "Info: "+feature.properties.additionalinfo+"<br>";
		}
		if (feature.properties && feature.properties.link) {  //TODO - long links - crash the popup!
			if(feature.properties.link.length>40){
				popupContent += "Link: <a href='"+feature.properties.link+"' target='_new'>"+feature.properties.link.substr(0,40)+"...</a><br>";
			}else{
				popupContent += "Link: <a href='"+feature.properties.link+"' target='_new'>"+feature.properties.link+"</a><br>";
			}
		}
		if (feature.properties && feature.properties.openinghours) {
			popupContent += feature.properties.openinghours;
		}
		if(popupContent == ""){
			popupContent = "This is a feature without info - please add more details...<br>";
		}

		//Suround the final string with ... <p>
		popupContent = "<p>"+popupContent+"</p>";

		layer.bindPopup(popupContent);
	}

	function onEachFeatureSperrmuell(feature, layer) {
		var popupContent = "";
		if (feature.properties && feature.properties.popupContent) {
			popupContent += "<strong>"+feature.properties.popupContent+"</strong><br>";
		}
		if (feature.properties && feature.properties.additionalinfo) {
			popupContent += "Info: "+feature.properties.additionalinfo+"<br>";
		}
		if (feature.properties && feature.properties.link) {  //TODO - long links - crash the popup!
			if(feature.properties.link.length>40){
				popupContent += "Link: <a href='"+feature.properties.link+"' target='_new'>"+feature.properties.link.substr(40)+"</a><br>";
			}else{
				popupContent += "Link: <a href='"+feature.properties.link+"' target='_new'>"+feature.properties.link+"</a><br>";
			}
		}
		if (feature.properties && feature.properties.openinghours) {
			popupContent += feature.properties.openinghours;
		}
		if(popupContent == ""){
			popupContent = "This feature is still in BETA status - please verifiy the shown results on the source sites...<br>Click here for the <a href=\"javascript:sperrmuellpopupbeta()\">Info Popup...</a>.";
		}

		//Suround the final string with ... <p>
		popupContent = "<p>"+popupContent+"</p>";

		layer.bindPopup(popupContent);
	}


//Icons:  SVG Source File is in the CreateAssets folder... Icon is drawn in Inkscape - IconImages are C&P from MS Word or...
//https://game-icons.net/1x1/delapouite/toolbox.html  (all are svg imports and manipulated)



/*
		var shopIcon = L.icon({
			iconUrl: 'img/shop_37x37.png',
			iconSize: [37, 37],
			iconAnchor: [18, 37],
			popupAnchor: [0, -28]
		});
		var flohmarktIcon = L.icon({
			iconUrl: 'img/flohmarkt_grau_37x37.png',
			iconSize: [37, 37],
			iconAnchor: [18, 37],
			popupAnchor: [0, -28]
		});
		var secondhandIcon = L.icon({
			iconUrl: 'img/secondhand_37x37.png',
			iconSize: [37, 37],
			iconAnchor: [18, 37],
			popupAnchor: [0, -28]
		});
*/

</script>
</body>
</html>
